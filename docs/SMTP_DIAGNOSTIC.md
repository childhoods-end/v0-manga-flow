# SMTP é‚®ä»¶è¯Šæ–­æŒ‡å—

## ğŸ” ä½ é‡åˆ°çš„é—®é¢˜

- âœ… Gmail SMTP å·²é…ç½®
- âŒ æ”¶ä¸åˆ°é‚®ä»¶
- âŒ Supabase ç•Œé¢æ‰¾ä¸åˆ° "Send test email" æŒ‰é’®

## ğŸš€ ä½¿ç”¨æµ‹è¯•é¡µé¢è¯Šæ–­

æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæµ‹è¯•é¡µé¢æ¥å¸®ä½ è¯Šæ–­é—®é¢˜ï¼š

### æ­¥éª¤ 1: éƒ¨ç½²ä»£ç 

ä»£ç å·²æ¨é€åˆ° GitHubï¼Œç­‰å¾… Vercel è‡ªåŠ¨éƒ¨ç½²ï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰

### æ­¥éª¤ 2: è®¿é—®æµ‹è¯•é¡µé¢

éƒ¨ç½²å®Œæˆåè®¿é—®ï¼š
```
https://your-domain.vercel.app/test-email
```

### æ­¥éª¤ 3: æµ‹è¯•é‚®ä»¶å‘é€

1. è¾“å…¥ä½ çš„é‚®ç®±åœ°å€
2. ç‚¹å‡»"å‘é€æµ‹è¯•é‚®ä»¶"
3. æŸ¥çœ‹ç»“æœï¼š
   - âœ… **æˆåŠŸ** - æ£€æŸ¥é‚®ç®±ï¼ˆåŒ…æ‹¬åƒåœ¾é‚®ä»¶ç®±ï¼‰
   - âŒ **å¤±è´¥** - æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼ŒæŒ‰ä¸‹æ–¹æ­¥éª¤æ’æŸ¥

## ğŸ”§ æ ¹æ®é”™è¯¯ä¿¡æ¯æ’æŸ¥

### é”™è¯¯ 1: "Authentication failed" æˆ– "Invalid credentials"

**åŸå› **: Gmail å¯†ç é”™è¯¯

**è§£å†³æ­¥éª¤**:

1. **ç¡®è®¤ä¸¤æ­¥éªŒè¯å·²å¯ç”¨**
   - è®¿é—®: https://myaccount.google.com/security
   - æŸ¥çœ‹ "ä¸¤æ­¥éªŒè¯" æ˜¯å¦å·²å¼€å¯ï¼ˆå¿…é¡»å¼€å¯ï¼‰

2. **é‡æ–°ç”Ÿæˆåº”ç”¨ä¸“ç”¨å¯†ç **
   - è®¿é—®: https://myaccount.google.com/apppasswords
   - å¦‚æœçœ‹ä¸åˆ°æ­¤é¡µé¢ â†’ è¯´æ˜ä¸¤æ­¥éªŒè¯æœªå¯ç”¨ï¼Œè¿”å›æ­¥éª¤ 1
   - åˆ é™¤æ—§çš„ "MangaFlow" å¯†ç 
   - åˆ›å»ºæ–°å¯†ç ï¼šé€‰æ‹© "é‚®ä»¶" â†’ "å…¶ä»–" â†’ è¾“å…¥ "MangaFlow"
   - å¤åˆ¶ 16 ä½å¯†ç ï¼ˆæ ¼å¼: `xxxx xxxx xxxx xxxx`ï¼‰

3. **æ›´æ–° Supabase é…ç½®**
   - Supabase Dashboard â†’ Project Settings â†’ Auth â†’ SMTP Settings
   - æ‰¾åˆ° "SMTP Password" å­—æ®µ
   - **ç²˜è´´å¯†ç æ—¶å»æ‰æ‰€æœ‰ç©ºæ ¼**ï¼Œå˜æˆ `xxxxxxxxxxxxxxxx`
   - ä¿å­˜é…ç½®

4. **å†æ¬¡æµ‹è¯•**
   - è¿”å› `/test-email` é¡µé¢é‡æ–°æµ‹è¯•

### é”™è¯¯ 2: "SMTP not configured" æˆ– "Email not sent"

**åŸå› **: SMTP é…ç½®æœªå¯ç”¨æˆ–ä¸å®Œæ•´

**è§£å†³æ­¥éª¤**:

1. **æ£€æŸ¥ Supabase SMTP è®¾ç½®**
   - Supabase Dashboard â†’ Project Settings â†’ Auth
   - æ»šåŠ¨åˆ° **"SMTP Settings"** éƒ¨åˆ†
   - ç¡®è®¤ **"Enable Custom SMTP"** å¼€å…³æ˜¯**å¼€å¯**çŠ¶æ€ï¼ˆè“è‰²ï¼‰

2. **éªŒè¯æ‰€æœ‰å­—æ®µéƒ½å·²å¡«å†™**
   ```
   âœ… Sender name: MangaFlow
   âœ… Sender email: your-email@gmail.com
   âœ… SMTP Host: smtp.gmail.com
   âœ… SMTP Port: 587
   âœ… SMTP Username: your-email@gmail.com (å¿…é¡»å’Œ Sender email ç›¸åŒ)
   âœ… SMTP Password: xxxxxxxxxxxxxxxx (16ä½ï¼Œæ— ç©ºæ ¼)
   ```

3. **ä¿å­˜å¹¶ç­‰å¾…**
   - ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ "Save" æŒ‰é’®
   - ç­‰å¾… 10-20 ç§’è®©é…ç½®ç”Ÿæ•ˆ

4. **å†æ¬¡æµ‹è¯•**

### é”™è¯¯ 3: "Rate limit exceeded" æˆ– "Too many requests"

**åŸå› **: çŸ­æ—¶é—´å†…å‘é€äº†å¤ªå¤šé‚®ä»¶

**è§£å†³**:
- ç­‰å¾… 10-15 åˆ†é’Ÿåå†è¯•
- Gmail é™åˆ¶: æ¯åˆ†é’Ÿçº¦ 20-30 å°

### é”™è¯¯ 4: "Connection timeout" æˆ– "Network error"

**åŸå› **: ç½‘ç»œè¿æ¥é—®é¢˜æˆ– Port è¢«é˜»æ­¢

**è§£å†³**:

1. **æ£€æŸ¥ Port é…ç½®**
   - ç¡®è®¤ä½¿ç”¨çš„æ˜¯ Port **587**ï¼ˆä¸æ˜¯ 465 æˆ– 25ï¼‰

2. **å°è¯•å¤‡ç”¨é…ç½®**ï¼ˆå¦‚æœ 587 ä¸è¡Œï¼‰
   - Port: `465`
   - åŒæ—¶ä¿®æ”¹å…¶ä»–è®¾ç½®ä¿æŒä¸å˜

3. **æ£€æŸ¥ Supabase çŠ¶æ€**
   - è®¿é—®: https://status.supabase.com
   - æŸ¥çœ‹æ˜¯å¦æœ‰æœåŠ¡ä¸­æ–­

## ğŸ“Š æŸ¥çœ‹ Supabase æ—¥å¿—

å³ä½¿æ‰¾ä¸åˆ° "Send test email" æŒ‰é’®ï¼Œä½ ä»ç„¶å¯ä»¥æŸ¥çœ‹é‚®ä»¶æ—¥å¿—ï¼š

### æ­¥éª¤ 1: æ‰“å¼€æ—¥å¿—é¡µé¢

1. Supabase Dashboard â†’ å·¦ä¾§èœå•
2. æ‰¾åˆ° **"Authentication"** (äººå½¢å›¾æ ‡)
3. ç‚¹å‡» **"Logs"** å­èœå•

### æ­¥éª¤ 2: ç­›é€‰é‚®ä»¶æ—¥å¿—

1. åœ¨æ—¥å¿—é¡µé¢é¡¶éƒ¨æ‰¾åˆ°ç­›é€‰å™¨
2. é€‰æ‹©æˆ–è¾“å…¥ "Email" ç±»å‹
3. æŸ¥çœ‹æœ€è¿‘çš„é‚®ä»¶å‘é€è®°å½•

### æ­¥éª¤ 3: åˆ†ææ—¥å¿—

**æˆåŠŸçš„æ—¥å¿—**:
```
âœ… Email sent to user@example.com
âœ… Type: signup
âœ… Status: 200
```

**å¤±è´¥çš„æ—¥å¿—**:
```
âŒ Failed to send email
âŒ Error: Authentication failed
âŒ Status: 500
```

æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œå‚è€ƒä¸Šæ–¹çš„"é”™è¯¯æ’æŸ¥"éƒ¨åˆ†

## ğŸ¯ å®Œæ•´çš„ SMTP é…ç½®æ£€æŸ¥æ¸…å•

ä½¿ç”¨æ­¤æ¸…å•ç¡®è®¤æ¯ä¸€æ­¥éƒ½æ­£ç¡®ï¼š

### Gmail éƒ¨åˆ†
- [ ] âœ… Gmail ä¸¤æ­¥éªŒè¯å·²å¯ç”¨
- [ ] âœ… åº”ç”¨ä¸“ç”¨å¯†ç å·²ç”Ÿæˆ
- [ ] âœ… å¯†ç å·²å¤åˆ¶ï¼ˆ16ä½ï¼Œå«ç©ºæ ¼ï¼‰
- [ ] âœ… å¯ä»¥åœ¨ https://myaccount.google.com/apppasswords çœ‹åˆ°å¯†ç 

### Supabase SMTP éƒ¨åˆ†
- [ ] âœ… "Enable Custom SMTP" å¼€å…³å·²å¼€å¯
- [ ] âœ… Sender name å¡«å†™: MangaFlow
- [ ] âœ… Sender email å¡«å†™: your-email@gmail.com
- [ ] âœ… SMTP Host å¡«å†™: smtp.gmail.com
- [ ] âœ… SMTP Port å¡«å†™: 587
- [ ] âœ… SMTP Username å¡«å†™: your-email@gmail.comï¼ˆå’Œ Sender email ç›¸åŒï¼‰
- [ ] âœ… SMTP Password å¡«å†™: 16ä½å¯†ç ï¼ˆå·²å»é™¤ç©ºæ ¼ï¼‰
- [ ] âœ… ç‚¹å‡»äº† "Save" æŒ‰é’®
- [ ] âœ… ç­‰å¾…äº† 10-20 ç§’

### Supabase URL é…ç½®
- [ ] âœ… Authentication â†’ URL Configuration
- [ ] âœ… Site URL: https://your-domain.vercel.app
- [ ] âœ… Redirect URLs åŒ…å«:
  - [ ] https://your-domain.vercel.app/*
  - [ ] https://your-domain.vercel.app/auth/callback

### é‚®ç®±ç¡®è®¤è®¾ç½®
- [ ] âœ… Authentication â†’ Providers â†’ Email
- [ ] âœ… "Enable Email Provider" å·²å¼€å¯
- [ ] âœ… "Enable email confirmations" å·²å¼€å¯ï¼ˆå¦‚æœéœ€è¦é‚®ç®±éªŒè¯ï¼‰

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### æ–¹æ³• 1: ä½¿ç”¨æµ‹è¯•é¡µé¢ï¼ˆæ¨èï¼‰

è®¿é—®: https://your-domain.vercel.app/test-email

### æ–¹æ³• 2: ä½¿ç”¨ API ç«¯ç‚¹

æµè§ˆå™¨è®¿é—®:
```
https://your-domain.vercel.app/api/test-email?email=your@email.com
```

### æ–¹æ³• 3: å®é™…æ³¨å†Œ

1. è®¿é—®: https://your-domain.vercel.app/auth
2. ä½¿ç”¨æ–°é‚®ç®±æ³¨å†Œ
3. æ£€æŸ¥é‚®ç®±

## ğŸš¨ ä»ç„¶ä¸è¡Œï¼Ÿä¸´æ—¶è§£å†³æ–¹æ¡ˆ

å¦‚æœé…ç½®å¤šæ¬¡ä»ç„¶å¤±è´¥ï¼Œå¯ä»¥ä¸´æ—¶ç¦ç”¨é‚®ç®±éªŒè¯ï¼š

### å¿«é€Ÿä¿®å¤ï¼ˆ30ç§’ï¼‰

1. Supabase Dashboard â†’ Authentication â†’ Providers â†’ Email
2. **å…³é—­** "Enable email confirmations"
3. ä¿å­˜

**ç°åœ¨ç”¨æˆ·å¯ä»¥æ³¨å†Œåç«‹å³ç™»å½•ï¼Œæ— éœ€éªŒè¯é‚®ç®±**

### æ³¨æ„äº‹é¡¹

âš ï¸ **è¿™åªæ˜¯ä¸´æ—¶æ–¹æ¡ˆï¼Œæ­£å¼ä¸Šçº¿å‰éœ€è¦å¯ç”¨é‚®ç®±éªŒè¯ï¼**

åŸå› ï¼š
- é˜²æ­¢åƒåœ¾æ³¨å†Œ
- ç¡®è®¤é‚®ç®±çœŸå®æ€§
- ç¬¦åˆå®‰å…¨æœ€ä½³å®è·µ

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœå°è¯•äº†æ‰€æœ‰æ–¹æ³•ä»ç„¶ä¸è¡Œï¼š

1. **æˆªå›¾æä¾›**:
   - Supabase SMTP Settings é¡µé¢æˆªå›¾
   - `/test-email` é¡µé¢çš„é”™è¯¯ä¿¡æ¯æˆªå›¾
   - Supabase Logs çš„é”™è¯¯æ—¥å¿—æˆªå›¾

2. **æ£€æŸ¥é¡¹ç›®**:
   - é¡¹ç›®æ˜¯å¦åœ¨ Vercel æ­£ç¡®éƒ¨ç½²ï¼Ÿ
   - ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®ï¼Ÿ

3. **è”ç³» Supabase æ”¯æŒ**:
   - é‚®ä»¶: support@supabase.io
   - Discord: https://discord.supabase.com

## ğŸ’¡ æç¤º

**æœ€å¸¸è§çš„é—®é¢˜æ˜¯**:
1. âŒ åº”ç”¨ä¸“ç”¨å¯†ç ç²˜è´´æ—¶åŒ…å«äº†ç©ºæ ¼
2. âŒ ä¸¤æ­¥éªŒè¯æœªå¯ç”¨
3. âŒ Sender email å’Œ SMTP Username ä¸ä¸€è‡´
4. âŒ "Enable Custom SMTP" å¼€å…³æœªå¼€å¯
5. âŒ Port å†™æˆäº† 465 æˆ– 25ï¼ˆåº”è¯¥æ˜¯ 587ï¼‰

**ä»”ç»†æ£€æŸ¥è¿™ 5 ç‚¹ï¼Œ99% çš„é—®é¢˜éƒ½èƒ½è§£å†³ï¼**
